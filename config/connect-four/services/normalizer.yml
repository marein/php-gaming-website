services:

    connect-four.jms:
        class: JMS\Serializer\Serializer
        factory: ['Gaming\Common\Port\Adapter\Jms\JmsSerializerFactory', 'create']
        arguments:
            - '%kernel.debug%'
            - '%kernel.cache_dir%/connect-four/jms'
            - { 'Gaming\ConnectFour': '%kernel.project_dir%/src/ConnectFour/Port/Adapter/Persistence/Jms' }
            - !tagged_iterator connect-four.jms.subscriber

    connect-four.jms.subscriber.game-id:
        class: Gaming\ConnectFour\Port\Adapter\Persistence\Jms\GameIdSubscriber
        tags: ['connect-four.jms.subscriber']

    connect-four.jms.subscriber.field:
        class: Gaming\ConnectFour\Port\Adapter\Persistence\Jms\FieldSubscriber
        tags: ['connect-four.jms.subscriber']

    connect-four.normalizer:
        class: Gaming\Common\Port\Adapter\Normalizer\JmsSerializerNormalizer
        arguments:
            - '@connect-four.jms'
