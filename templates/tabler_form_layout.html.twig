{% use "bootstrap_5_layout.html.twig" %}

{# Override to ignore label_attr for expanded choices, allowing them to be rendered as buttons. #}
{%- block choice_label -%}
    {% if expanded is defined and expanded %}
        <legend class="form-label{{ required ? ' required' }}">{{ label }}</legend>
    {% else %}
        {{- parent() -}}
    {% endif %}
{%- endblock choice_label %}

{# Override to ensure choices don't inherit the required attribute, removing the asterisk from each choice. #}
{%- block choice_widget_expanded -%}
    <div {{ block('widget_container_attributes') }}>
        {%- for child in form %}
            {{- form_widget(child, {
                required: false,
                parent_label_class: label_attr.class|default(''),
                translation_domain: choice_translation_domain,
                valid: valid,
            }) -}}
        {% endfor -%}
    </div>
{%- endblock choice_widget_expanded %}

{%- block form_errors -%}
    {%- if errors|length > 0 -%}
        {%- for error in errors -%}
            {% if form is rootform %}
                <div class="alert alert-important alert-danger" style="--tblr-alert-bg: var(--tblr-danger-lt);">
                    <div class="alert-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="2"
                             stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"
                             class="icon">
                            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                            <path d="M12 9v4"></path>
                            <path d="M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z"></path>
                            <path d="M12 16h.01"></path>
                        </svg>
                    </div>
                    {{ error.message }}
                </div>
            {% else %}
                <div class="invalid-feedback d-block">
                    {{ error.message }}
                </div>
            {% endif %}
        {%- endfor -%}
    {%- endif %}
{%- endblock form_errors %}
